# Развёртывание на Vercel

## 1. Загрузка на GitHub

```bash
cd c:\Users\Admin\Downloads\psychologist-website

# Инициализация (если ещё не сделано)
git init
git add .
git commit -m "Initial commit: psychologist website"

# Подключение репозитория (создайте repo на github.com/new)
git branch -M main
git remote add origin https://github.com/ВАШ_ЮЗЕРНЕЙМ/psychologist-website.git
git push -u origin main
```

## 2. Деплой на Vercel

1. Зайдите на [vercel.com](https://vercel.com) и войдите через GitHub
2. **Add New** → **Project**
3. Выберите репозиторий `psychologist-website`
4. Оставьте настройки по умолчанию (Next.js, root directory пусто)
5. Нажмите **Deploy**

## 3. Подключение домена athenpsy.ru

1. В проекте Vercel: **Settings** → **Domains**
2. Добавьте `athenpsy.ru` и `www.athenpsy.ru`
3. В панели DNS вашего регистратора создайте записи по инструкции Vercel (обычно A-запись на `76.76.21.21` или CNAME)

## 4. Переменные окружения (опционально)

Если понадобятся: **Settings** → **Environment Variables**

---

# Standalone-сборка (Спринтхост и другой Node-хостинг)

**Важно:** Спринтхост работает под **Linux**. Если собирать проект на **Windows** (у себя на компе), в архив попадают Windows-зависимости (например `sharp`), и на хостинге будут ошибки про «не все файлы» и зависимости. Ниже — два варианта: рекомендуемый (сборка на Linux через GitHub) и ручная заливка папкой.

---

## Вариант A: Сборка на Linux (рекомендуется) — без проблем с зависимостями

1. Залейте проект на **GitHub** (если ещё не залит).
2. Откройте репозиторий на GitHub → вкладка **Actions** → слева выберите **Build standalone (Linux)** → **Run workflow** → **Run workflow**.
3. Дождитесь окончания (зелёная галочка). Нажмите на сборку → внизу в **Artifacts** скачайте **sprinthost-standalone** (это zip-архив).
4. Распакуйте скачанный zip **в пустую папку**. Внутри должны быть `server.js`, папки `node_modules`, `.next`, `public`.
5. Загрузите на Спринтхост **всё содержимое** этой папки (не саму папку) в корень сайта (например в `public_html`) через файловый менеджер или SFTP. Можно загрузить и сам zip, а потом распаковать его на сервере.
6. Настройте `.htaccess` и Node.js 22 по шагам ниже (раздел «Спринтхост: настройка .htaccess»).

Так вы получите архив, собранный под Linux: все зависимости и файлы будут подходящими для хостинга.

---

## Вариант B: Сборка у себя на компе (Windows)

В корне проекта выполните:

```bash
npm run standalone
```

Скрипт создаст папку **`.next/standalone`** с нужными файлами. На Спринтхост (Linux) такая сборка может выдавать ошибки из‑за Windows-зависимостей. Лучше использовать **Вариант A**. Если всё же заливаете свою сборку — загружайте папку по **SFTP** (не упаковывайте в zip в Windows), чтобы не терялись файлы и не ломались симлинки.

---

## Что загружать на хостинг

Нужно залить **содержимое** папки (или содержимое распакованного архива из Варианта A): в корне сайта на сервере должны лежать файлы и папки, а не одна вложенная папка.

Внутри должна быть структура примерно такая:
- `server.js` — точка входа
- `node_modules/`
- `.next/` (внутри — `static`, серверные файлы)
- `public/` (картинки, favicon и т.д.)

## 3. Спринтхост: настройка .htaccess

В корне сайта (рядом с `server.js`) создайте или отредактируйте `.htaccess`:

```apache
PassengerStartupFile server.js
PassengerAppType node
PassengerAppRoot /home/ВАШ_ЛОГИН/domains/ВАШ_ДОМЕН/public_html
Require all granted
Options -MultiViews
```

Путь в `PassengerAppRoot` замените на реальный путь к папке с загруженным приложением (его можно посмотреть в панели Спринтхост).

В панели Спринтхост: **Сайты** → **Веб-серверы** → выберите **Node.js 22** для этого домена.

## 4. Перезапуск приложения

По SSH в папке приложения:

```bash
mkdir -p tmp
touch tmp/restart.txt
```
